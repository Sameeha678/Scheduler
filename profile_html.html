<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Profile</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="profile_styles.css">
</head>
<body>
    <div class="container">
        <div class="profile-wrapper">
            <!-- Header with Username and Streak -->
            <div class="profile-header">
                <div class="d-flex justify-content-between align-items-center">
                    <div class="username-title">
                        <i class="fas fa-user-circle me-2"></i>Hello, <span id="username">JohnDoe</span>
                    </div>
                    <div class="streak-badge">
                        <i class="fas fa-fire flame-icon"></i>
                        <span id="streak-count">5</span> day streak
                    </div>
                </div>
            </div>
            
            <!-- Work Time -->
            <div class="section-card">
                <div class="section-header">
                    <div class="section-title">
                        <i class="fas fa-business-time fa-lg"></i>
                        Work Hours
                    </div>
                    <div>
                        <button id="time-preferences-edit" class="btn btn-edit edit-btn">
                            <i class="fas fa-pen me-1"></i> Edit
                        </button>
                        <button id="time-preferences-save" class="btn btn-save edit-btn" style="display: none;">
                            <i class="fas fa-check me-1"></i> Save
                        </button>
                        <button id="time-preferences-cancel" class="btn btn-cancel" style="display: none;">Cancel</button>
                    </div>
                </div>
                
                <!-- View Mode -->
                <div id="time-view-mode" class="section-content time-display">
                    <span class="text-muted">From</span>
                    <span class="time-value" id="start-time-display">09:00 AM</span>
                    <span class="text-muted">to</span>
                    <span class="time-value" id="end-time-display">05:00 PM</span>
                </div>
                
                <!-- Edit Mode -->
                <div id="time-edit-mode" class="section-content time-edit-container" style="display: none;">
                    <div class="input-group time-input-group">
                        <span class="input-group-text">From</span>
                        <input type="time" id="start-time-input" class="form-control time-input" value="09:00">
                    </div>
                    <div class="input-group time-input-group">
                        <span class="input-group-text">To</span>
                        <input type="time" id="end-time-input" class="form-control time-input" value="17:00">
                    </div>
                </div>
            </div>
            
            <!-- Break Preferences -->
            <div class="section-card">
                <div class="section-header">
                    <div class="section-title">
                        <i class="fas fa-mug-hot fa-lg"></i>
                        Break Preferences
                    </div>
                    <div>
                        <button id="break-preferences-edit" class="btn btn-edit edit-btn">
                            <i class="fas fa-pen me-1"></i> Edit
                        </button>
                        <button id="break-preferences-save" class="btn btn-save edit-btn" style="display: none;">
                            <i class="fas fa-check me-1"></i> Save
                        </button>
                        <button id="break-preferences-cancel" class="btn btn-cancel" style="display: none;">Cancel</button>
                    </div>
                </div>
                
                <!-- View Mode -->
                <div id="break-view-mode" class="section-content break-display">
                    <span id="break-display-icon" class="break-display-icon break-display-medium">
                        <i class="fas fa-coffee"></i>
                    </span>
                    <span id="break-display">Medium</span>
                </div>
                
                <!-- Edit Mode -->
                <div id="break-edit-mode" class="section-content break-options" style="display: none;">
                    <div id="break-short" class="break-option break-short">
                        <i class="fas fa-walking"></i>
                        <div>Short</div>
                        <div class="break-time">5-10 min</div>
                    </div>
                    <div id="break-medium" class="break-option break-medium selected">
                        <i class="fas fa-coffee"></i>
                        <div>Medium</div>
                        <div class="break-time">15-20 min</div>
                    </div>
                    <div id="break-long" class="break-option break-long">
                        <i class="fas fa-couch"></i>
                        <div>Long</div>
                        <div class="break-time">30-45 min</div>
                    </div>
                </div>
            </div>
            
            <!-- Stats Section -->
            <div class="d-flex gap-3">
                <!-- Streak Count -->
                <div class="stats-box flex-fill">
                    <div class="stats-icon streak-icon">
                        <i class="fas fa-fire"></i>
                    </div>
                    <div class="stats-content">
                        <div class="stats-title">Current Streak</div>
                        <div class="stats-value"><span id="streak-count-box">5</span> days</div>
                    </div>
                </div>
                
                <!-- Last Activity -->
                <div class="stats-box flex-fill">
                    <div class="stats-icon activity-icon">
                        <i class="fas fa-history"></i>
                    </div>
                    <div class="stats-content">
                        <div class="stats-title">Last Activity</div>
                        <div class="stats-value" id="last-task">"Project Update"</div>
                        <div class="activity-date" id="last-date">18th March 2025</div>
                    </div>
                </div>
            </div>
            
            <div class="footer-note mt-4">
                All changes are saved automatically to your profile
                <div class="last-active-pill">
                    <i class="fas fa-check-circle me-1"></i> Profile up to date
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Mock user data that would come from the backend
            let userData = {
                username: "JohnDoe",
                workStartTime: "09:00",
                workEndTime: "17:00",
                breakPreference: "medium",
                streakCount: 5,
                lastTask: "Project Update",
                lastDate: "18th March 2025"
            };
            
            // Format time from 24hr to 12hr format
            function formatTimeTo12Hr(time24) {
                let [hours, minutes] = time24.split(':');
                hours = parseInt(hours);
                let period = hours >= 12 ? 'PM' : 'AM';
                hours = hours % 12 || 12;
                return `${hours}:${minutes.padStart(2, '0')} ${period}`;
            }
            
            // Update break display icon
            function updateBreakDisplayIcon() {
                const breakIcon = document.getElementById('break-display-icon');
                breakIcon.className = 'break-display-icon';
                breakIcon.classList.add(`break-display-${userData.breakPreference}`);
                
                let iconHTML = '';
                switch(userData.breakPreference) {
                    case 'short':
                        iconHTML = '<i class="fas fa-walking"></i>';
                        break;
                    case 'medium':
                        iconHTML = '<i class="fas fa-coffee"></i>';
                        break;
                    case 'long':
                        iconHTML = '<i class="fas fa-couch"></i>';
                        break;
                }
                breakIcon.innerHTML = iconHTML;
            }
            
            // Initialize UI with data
            function updateUI() {
                document.getElementById('username').textContent = userData.username;
                document.getElementById('start-time-display').textContent = formatTimeTo12Hr(userData.workStartTime);
                document.getElementById('end-time-display').textContent = formatTimeTo12Hr(userData.workEndTime);
                document.getElementById('break-display').textContent = userData.breakPreference.charAt(0).toUpperCase() + userData.breakPreference.slice(1);
                document.getElementById('streak-count').textContent = userData.streakCount;
                document.getElementById('streak-count-box').textContent = userData.streakCount;
                document.getElementById('last-task').textContent = `"${userData.lastTask}"`;
                document.getElementById('last-date').textContent = userData.lastDate;
                
                // Set form input values
                document.getElementById('start-time-input').value = userData.workStartTime;
                document.getElementById('end-time-input').value = userData.workEndTime;
                
                // Set break preference
                document.querySelectorAll('.break-option').forEach(option => {
                    option.classList.remove('selected');
                });
                document.getElementById(`break-${userData.breakPreference}`).classList.add('selected');
                
                // Update break icon
                updateBreakDisplayIcon();
            }
            
            // Add animations when saving
            function showSaveAnimation(sectionId) {
                const section = document.getElementById(sectionId);
                section.style.transition = 'transform 0.3s, box-shadow 0.3s';
                section.style.transform = 'scale(1.02)';
                section.style.boxShadow = '0 15px 30px rgba(0, 0, 0, 0.1)';
                
                setTimeout(() => {
                    section.style.transform = '';
                    section.style.boxShadow = '';
                }, 500);
            }
            
            // Time Preferences Edit Mode
            document.getElementById('time-preferences-edit').addEventListener('click', function() {
                document.getElementById('time-view-mode').style.display = 'none';
                document.getElementById('time-edit-mode').style.display = 'flex';
                document.getElementById('time-preferences-edit').style.display = 'none';
                document.getElementById('time-preferences-save').style.display = 'inline-block';
                document.getElementById('time-preferences-cancel').style.display = 'inline-block';
            });
            
            // Time Preferences Save
            document.getElementById('time-preferences-save').addEventListener('click', function() {
                userData.workStartTime = document.getElementById('start-time-input').value;
                userData.workEndTime = document.getElementById('end-time-input').value;
                
                // In a real app, you would save to the backend here
                console.log('Saving time preferences:', {
                    workStartTime: userData.workStartTime,
                    workEndTime: userData.workEndTime
                });
                
                updateUI();
                showSaveAnimation('time-view-mode');
                
                document.getElementById('time-view-mode').style.display = 'flex';
                document.getElementById('time-edit-mode').style.display = 'none';
                document.getElementById('time-preferences-edit').style.display = 'inline-block';
                document.getElementById('time-preferences-save').style.display = 'none';
                document.getElementById('time-preferences-cancel').style.display = 'none';
            });
            
            // Time Preferences Cancel
            document.getElementById('time-preferences-cancel').addEventListener('click', function() {
                document.getElementById('time-view-mode').style.display = 'flex';
                document.getElementById('time-edit-mode').style.display = 'none';
                document.getElementById('time-preferences-edit').style.display = 'inline-block';
                document.getElementById('time-preferences-save').style.display = 'none';
                document.getElementById('time-preferences-cancel').style.display = 'none';
            });
            
            // Break Preferences Edit Mode
            document.getElementById('break-preferences-edit').addEventListener('click', function() {
                document.getElementById('break-view-mode').style.display = 'none';
                document.getElementById('break-edit-mode').style.display = 'flex';
                document.getElementById('break-preferences-edit').style.display = 'none';
                document.getElementById('break-preferences-save').style.display = 'inline-block';
                document.getElementById('break-preferences-cancel').style.display = 'inline-block';
            });
            
            // Break Options Selection
            document.querySelectorAll('.break-option').forEach(option => {
                option.addEventListener('click', function() {
                    document.querySelectorAll('.break-option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    this.classList.add('selected');
                });
            });
            
            // Break Preferences Save
            document.getElementById('break-preferences-save').addEventListener('click', function() {
                const selectedBreak = document.querySelector('.break-option.selected').id.replace('break-', '');
                userData.breakPreference = selectedBreak;
                
                // In a real app, you would save to the backend here
                console.log('Saving break preference:', {
                    breakPreference: userData.breakPreference
                });
                
                updateUI();
                showSaveAnimation('break-view-mode');
                
                document.getElementById('break-view-mode').style.display = 'block';
                document.getElementById('break-edit-mode').style.display = 'none';
                document.getElementById('break-preferences-edit').style.display = 'inline-block';
                document.getElementById('break-preferences-save').style.display = 'none';
                document.getElementById('break-preferences-cancel').style.display = 'none';
            });
            
            // Break Preferences Cancel
            document.getElementById('break-preferences-cancel').addEventListener('click', function() {
                document.getElementById('break-view-mode').style.display = 'block';
                document.getElementById('break-edit-mode').style.display = 'none';
                document.getElementById('break-preferences-edit').style.display = 'inline-block';
                document.getElementById('break-preferences-save').style.display = 'none';
                document.getElementById('break-preferences-cancel').style.display = 'none';
            });
            
            // Add hover effects to stats boxes
            document.querySelectorAll('.stats-box').forEach(box => {
                box.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-5px)';
                    this.style.boxShadow = '0 8px 25px rgba(0, 0, 0, 0.1)';
                });
                
                box.addEventListener('mouseleave', function() {
                    this.style.transform = '';
                    this.style.boxShadow = '0 5px 15px rgba(0, 0, 0, 0.05)';
                });
            });
            
            // Initialize the UI
            updateUI();
        });
    </script>
</body>
</html>