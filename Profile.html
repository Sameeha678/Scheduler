<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Profile</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="profile.css">
</head>
<body>
    <div class="main-container">
        <!-- Sidebar Navigation -->
        <nav class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-logo">
                    <i class="fas fa-tasks"></i>
                    My Schedular
                </div>
            </div>
            
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="#" class="nav-link">
                        <i class="fas fa-home"></i>
                        Home
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link active">
                        <i class="fas fa-user"></i>
                        Profile
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link">
                        <i class="fas fa-thumbs-up"></i>
                        Recommendations
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link logout-link">
                        <i class="fas fa-sign-out-alt"></i>
                        Logout
                    </a>
                </li>
            </ul>
        </nav>
        
        <!-- Toggle Button -->
        <button class="toggle-btn" id="toggleBtn">
            <i class="fas fa-bars" id="toggleIcon"></i>
        </button>
        
        <!-- Main Content -->
        <div class="content-wrapper" id="content">
            <div class="container">
                <div class="profile-wrapper">
                    <!-- Header with Username and Streak -->
                    <div class="profile-header">
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="username-title">
                                <i class="fas fa-user-circle me-2"></i>Hello, <span id="username">JohnDoe</span>
                            </div>
                            <div class="streak-badge">
                                <i class="fas fa-fire flame-icon"></i>
                                <span id="streak-count">5</span> day streak
                            </div>
                        </div>
                    </div>
                    
                    <!-- Work Time -->
                    <div class="section-card">
                        <div class="section-header">
                            <div class="section-title">
                                <i class="fas fa-business-time fa-lg"></i>
                                Work Hours
                            </div>
                            <div>
                                <button id="time-preferences-edit" class="btn btn-edit edit-btn">
                                    <i class="fas fa-pen me-1"></i> Edit
                                </button>
                                <button id="time-preferences-save" class="btn btn-save edit-btn" style="display: none;">
                                    <i class="fas fa-check me-1"></i> Save
                                </button>
                                <button id="time-preferences-cancel" class="btn btn-cancel" style="display: none;">Cancel</button>
                            </div>
                        </div>
                        
                        <!-- View Mode -->
                        <div id="time-view-mode" class="section-content time-display">
                            <span class="text-muted">From</span>
                            <span class="time-value" id="start-time-display">09:00 AM</span>
                            <span class="text-muted">to</span>
                            <span class="time-value" id="end-time-display">05:00 PM</span>
                        </div>
                        
                        <!-- Edit Mode -->
                        <div id="time-edit-mode" class="section-content time-edit-container" style="display: none;">
                            <div class="input-group time-input-group">
                                <span class="input-group-text">From</span>
                                <input type="time" id="start-time-input" class="form-control time-input" value="09:00">
                            </div>
                            <div class="input-group time-input-group">
                                <span class="input-group-text">To</span>
                                <input type="time" id="end-time-input" class="form-control time-input" value="17:00">
                            </div>
                        </div>
                    </div>
                    
                    <!-- Break Preferences -->
                    <div class="section-card">
                        <div class="section-header">
                            <div class="section-title">
                                <i class="fas fa-mug-hot fa-lg"></i>
                                Break Preferences
                            </div>
                            <div>
                                <button id="break-preferences-edit" class="btn btn-edit edit-btn">
                                    <i class="fas fa-pen me-1"></i> Edit
                                </button>
                                <button id="break-preferences-save" class="btn btn-save edit-btn" style="display: none;">
                                    <i class="fas fa-check me-1"></i> Save
                                </button>
                                <button id="break-preferences-cancel" class="btn btn-cancel" style="display: none;">Cancel</button>
                            </div>
                        </div>
                        
                        <!-- View Mode -->
                        <div id="break-view-mode" class="section-content break-display">
                            <span id="break-display-icon" class="break-display-icon break-display-medium">
                                <i class="fas fa-coffee"></i>
                            </span>
                            <span id="break-display">Medium</span>
                        </div>
                        
                        <!-- Edit Mode -->
                        <div id="break-edit-mode" class="section-content break-options" style="display: none;">
                            <div id="break-short" class="break-option break-short">
                                <i class="fas fa-walking"></i>
                                <div>Short</div>
                                <div class="break-time">5-10 min</div>
                            </div>
                            <div id="break-medium" class="break-option break-medium selected">
                                <i class="fas fa-coffee"></i>
                                <div>Medium</div>
                                <div class="break-time">15-20 min</div>
                            </div>
                            <div id="break-long" class="break-option break-long">
                                <i class="fas fa-couch"></i>
                                <div>Long</div>
                                <div class="break-time">30-45 min</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Stats Section -->
                    <div class="d-flex gap-3">
                        <!-- Streak Count -->
                        <div class="stats-box flex-fill">
                            <div class="stats-icon streak-icon">
                                <i class="fas fa-fire"></i>
                            </div>
                            <div class="stats-content">
                                <div class="stats-title">Current Streak</div>
                                <div class="stats-value"><span id="streak-count-box">5</span> days</div>
                            </div>
                        </div>
                        
                        <!-- Last Activity -->
                        <div class="stats-box flex-fill">
                            <div class="stats-icon activity-icon">
                                <i class="fas fa-history"></i>
                            </div>
                            <div class="stats-content">
                                <div class="stats-title">Last Activity</div>
                                <div class="stats-value" id="last-task">"Project Update"</div>
                                <div class="activity-date" id="last-date">18th March 2025</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="footer-note mt-4">
                        All changes are saved automatically to your profile
                        <div class="last-active-pill">
                            <i class="fas fa-check-circle me-1"></i> Profile up to date
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // Toggle sidebar functionality
        const toggleBtn = document.getElementById('toggleBtn');
        const sidebar = document.getElementById('sidebar');
        const content = document.getElementById('content');
        const toggleIcon = document.getElementById('toggleIcon');
        
        toggleBtn.addEventListener('click', function() {
            sidebar.classList.toggle('active');
            content.classList.toggle('active');
            toggleBtn.classList.toggle('active');
            
            // Change icon based on state
            if (sidebar.classList.contains('active')) {
                toggleIcon.classList.remove('fa-bars');
                toggleIcon.classList.add('fa-times');
            } else {
                toggleIcon.classList.remove('fa-times');
                toggleIcon.classList.add('fa-bars');
            }
        });
        
        // Close sidebar when clicking outside on mobile
        document.addEventListener('click', function(event) {
            const isSmallScreen = window.innerWidth <= 768;
            if (isSmallScreen && 
                !sidebar.contains(event.target) && 
                !toggleBtn.contains(event.target) && 
                sidebar.classList.contains('active')) {
                sidebar.classList.remove('active');
                content.classList.remove('active');
                toggleBtn.classList.remove('active');
                toggleIcon.classList.remove('fa-times');
                toggleIcon.classList.add('fa-bars');
            }
        });
        
        // Highlight active nav item
        const navLinks = document.querySelectorAll('.nav-link');
        navLinks.forEach(link => {
            link.addEventListener('click', function() {
                navLinks.forEach(l => l.classList.remove('active'));
                this.classList.add('active');
                
                // On mobile, close sidebar after clicking a link
                if (window.innerWidth <= 768) {
                    sidebar.classList.remove('active');
                    content.classList.remove('active');
                    toggleBtn.classList.remove('active');
                    toggleIcon.classList.remove('fa-times');
                    toggleIcon.classList.add('fa-bars');
                }
            });
        });
        
        // Mock user data that would come from the backend
        let userData = {
            username: "JohnDoe",
            workStartTime: "09:00",
            workEndTime: "17:00",
            breakPreference: "medium",
            streakCount: 5,
            lastTask: "Project Update",
            lastDate: "18th March 2025"
        };
        
        // Format time from 24hr to 12hr format
        function formatTimeTo12Hr(time24) {
            let [hours, minutes] = time24.split(':');
            hours = parseInt(hours);
            let period = hours >= 12 ? 'PM' : 'AM';
            hours = hours % 12 || 12;
            return `${hours}:${minutes.padStart(2, '0')} ${period}`;
        }
        
        // Update break display icon
        function updateBreakDisplayIcon() {
            const breakIcon = document.getElementById('break-display-icon');
            breakIcon.className = 'break-display-icon';
            breakIcon.classList.add(`break-display-${userData.breakPreference}`);
            
            let iconHTML = '';
            switch(userData.breakPreference) {
                case 'short':
                    iconHTML = '<i class="fas fa-walking"></i>';
                    break;
                case 'medium':
                    iconHTML = '<i class="fas fa-coffee"></i>';
                    break;
                case 'long':
                    iconHTML = '<i class="fas fa-couch"></i>';
                    break;
            }
            breakIcon.innerHTML = iconHTML;
        }
        
        // Initialize UI with data
        function updateUI() {
            document.getElementById('username').textContent = userData.username;
            document.getElementById('start-time-display').textContent = formatTimeTo12Hr(userData.workStartTime);
            document.getElementById('end-time-display').textContent = formatTimeTo12Hr(userData.workEndTime);
            document.getElementById('break-display').textContent = userData.breakPreference.charAt(0).toUpperCase() + userData.breakPreference.slice(1);
            document.getElementById('streak-count').textContent = userData.streakCount;
            document.getElementById('streak-count-box').textContent = userData.streakCount;
            document.getElementById('last-task').textContent = `"${userData.lastTask}"`;
            document.getElementById('last-date').textContent = userData.lastDate;
            
            // Set form input values
            document.getElementById('start-time-input').value = userData.workStartTime;
            document.getElementById('end-time-input').value = userData.workEndTime;
            
            // Set break preference
            document.querySelectorAll('.break-option').forEach(option => {
                option.classList.remove('selected');
            });
            document.getElementById(`break-${userData.breakPreference}`).classList.add('selected');
            
            // Update break icon
            updateBreakDisplayIcon();
        }
        
        // Add animations when saving
        function showSaveAnimation(sectionId) {
            const section = document.getElementById(sectionId);
            section.style.transition = 'transform 0.3s, box-shadow 0.3s';
            section.style.transform = 'scale(1.02)';
            section.style.boxShadow = '0 15px 30px rgba(0, 0, 0, 0.1)';
            
            setTimeout(() => {
                section.style.transform = '';
                section.style.boxShadow = '';
            }, 500);
        }
        
        // Time Preferences Edit Mode
        document.getElementById('time-preferences-edit').addEventListener('click', function() {
            document.getElementById('time-view-mode').style.display = 'none';
            document.getElementById('time-edit-mode').style.display = 'flex';
            document.getElementById('time-preferences-edit').style.display = 'none';
            document.getElementById('time-preferences-save').style.display = 'inline-block';
            document.getElementById('time-preferences-cancel').style.display = 'inline-block';
        });
        
        // Time Preferences Save
        document.getElementById('time-preferences-save').addEventListener('click', function() {
            userData.workStartTime = document.getElementById('start-time-input').value;
            userData.workEndTime = document.getElementById('end-time-input').value;
            
            // In a real app, you would save to the backend here
            console.log('Saving time preferences:', {
                workStartTime: userData.workStartTime,
                workEndTime: userData.workEndTime
            });
            
            updateUI();
            showSaveAnimation('time-view-mode');
            
            document.getElementById('time-view-mode').style.display = 'flex';
            document.getElementById('time-edit-mode').style.display = 'none';
            document.getElementById('time-preferences-edit').style.display = 'inline-block';
            document.getElementById('time-preferences-save').style.display = 'none';
            document.getElementById('time-preferences-cancel').style.display = 'none';
        });
        
        // Time Preferences Cancel
        document.getElementById('time-preferences-cancel').addEventListener('click', function() {
            document.getElementById('time-view-mode').style.display = 'flex';
            document.getElementById('time-edit-mode').style.display = 'none';
            document.getElementById('time-preferences-edit').style.display = 'inline-block';
            document.getElementById('time-preferences-save').style.display = 'none';
            document.getElementById('time-preferences-cancel').style.display = 'none';
        });
        
        // Break Preferences Edit Mode
        document.getElementById('break-preferences-edit').addEventListener('click', function() {
            document.getElementById('break-view-mode').style.display = 'none';
            document.getElementById('break-edit-mode').style.display = 'flex';
            document.getElementById('break-preferences-edit').style.display = 'none';
            document.getElementById('break-preferences-save').style.display = 'inline-block';
            document.getElementById('break-preferences-cancel').style.display = 'inline-block';
        });
        
        // Break Preferences Save
        document.getElementById('break-preferences-save').addEventListener('click', function() {
            // Get selected break option
            const selectedBreak = document.querySelector('.break-option.selected');
            if (selectedBreak) {
                userData.breakPreference = selectedBreak.id.replace('break-', '');
            }
            
            // In a real app, you would save to the backend here
            console.log('Saving break preference:', {
                breakPreference: userData.breakPreference
            });
            
            updateUI();
            showSaveAnimation('break-view-mode');
            
            document.getElementById('break-view-mode').style.display = 'block';
            document.getElementById('break-edit-mode').style.display = 'none';
            document.getElementById('break-preferences-edit').style.display = 'inline-block';
            document.getElementById('break-preferences-save').style.display = 'none';
            document.getElementById('break-preferences-cancel').style.display = 'none';
        });
        
        // Break Preferences Cancel
        document.getElementById('break-preferences-cancel').addEventListener('click', function() {
            document.getElementById('break-view-mode').style.display = 'block';
            document.getElementById('break-edit-mode').style.display = 'none';
            document.getElementById('break-preferences-edit').style.display = 'inline-block';
            document.getElementById('break-preferences-save').style.display = 'none';
            document.getElementById('break-preferences-cancel').style.display = 'none';
        });
        
        // Break Option Selection
        document.querySelectorAll('.break-option').forEach(option => {
            option.addEventListener('click', function() {
                document.querySelectorAll('.break-option').forEach(opt => {
                    opt.classList.remove('selected');
                });
                this.classList.add('selected');
            });
        });
        
        // Initialize UI on page load
        updateUI();
    });
    </script>